<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #playerContainer {
            background-color: rgb(28, 28, 28);
            color: aliceblue;
            font-family: spotify-circular, Helvetica, Arial, sans-serif;
            border: 1px solid black;
            padding: 10px;
            display: flex;
        }

        img {
            width: 65px;

        }

        #leftDiv {
            display: flex;
            width: 30%;
            height: 70px;
        }

        #playerButtons {
            display: flex;
        }

        #trackImgDiv {
            height: 100%;
        }

        #trackImgDiv>img {
            height: 100%;
            width: 100%;
        }

        #playerButtons svg {
            margin: 5px 0 0;
            height: 30px;
            width: 30px;
        }

        #trackTitle {
            margin: 20px 0px 20px 17px;
        }

        #leftDiv>img {
            /* height: 100%; */
            width: 30px;
            margin: 20px;
        }

        #middileDiv {
            width: 60%;
        }

        #playerButtons {
            margin: 10px 39% 10px 35%;
        }

        #playerLine {
            width: 80%;
            height: 5px;
            margin: -7px 2%;
            /* background-color: #a19292; */
            border-radius: 50px;
        }

        #playerLine>input {
            width: 100%;
        }

        /* //bdsjbjbds */

        #rightDiv {
            width: 20%;
            display: flex;
        }

        #rightDiv>div {
            height: 24px;
            width: 26px;
            margin-top: 24px;
        }

        #rightDiv>div:nth-child(1) {
            /* border: 1px solid red; */
            margin-left: 35%;
            /* margin: 1000px; */
        }

        #rightDiv>div>img {
            width: 100%;
        }

        #valumeDiv>div {
            margin-top: 10px;
            border-radius: 50px;
            margin-left: 10px;
            height: 5px;
            width: 109px;
            /* background-color: #c2bdbd; */
        }

        #playerLine {
            position: relative;
            width: 95%;

        }

        #trackRange {
            -webkit-appearance: none;
            width: 100%;
            background-color: #ccc7c7;
            height: 5px;
            border-radius: 50px;
            cursor: pointer;
            overflow: hidden;
        }

        #trackRange:hover ::-webkit-slider-thumb {
            -webkit-appearance: default-button;
        }

        #trackRange::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 0px;
            height: 20px;
            background-color: black;
            box-shadow: -400px 0 0 400px rgb(255, 255, 255);
        }

        /* #playPouseButtonDiv{
            width: 100%;
            justify-content: center;
            align-items: center;
        }
        #playPouseButton{
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #d3cdcd;
            cursor: pointer;
            border: none;
        }
        #playPouseButton > span{
            position: absolute;
            top: 50%;
            left: 25%;
            transform: translateY(-50%);
            width: 7px;
    height: 21px;
            border-radius: 2px;
            background-color: aqua;
            transition: 0.5s;
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
        }
        #playPouseButton span:nth-child(2){
            left: 55%;
            transform-origin: center;
        }
        #playPouseButton#pouse span:nth-child(2){
            transform: translateY(-50%) scaleY(0);
        }
        #playPouseButton#pouse span:nth-child(1){
            position: absolute;
            width: 35%;
            left: 53%;
            transform: translate(-50%, 50%);
            border-radius: 0;
            clip-path: polygon(0 0, 100% 54%, 100% 53%, 0% 100%);

        } */
        #playPouseButton>img {
            height: 30px;
            width: 30px;
            padding: 3px 2px 0 4px;
        }

        #playPouseButton {
            margin: 0 20px;
            border-radius: 50px;
            border: none;
            background-color: #f0eaea;
        }

        #volumeRange>input {
            padding-top: 11px;
            width: 100%;
        }
        #playerLineDiv{
            display: flex;
            width: 95%;
        }
        svg{
            fill: rgb(191, 191, 191);
        }
        #currentTimeing{
            margin-left: 2%;
        }
        #songTimeing{
            margin-right: 10%;
        }
    </style>
</head>

<body>
    <div id="playerContainer">
        <audio src="" id="audio"></audio>
        <div id="leftDiv">
            <div id="trackImgDiv">
                <img id="trackImg" src="https://www.seekpng.com/png/detail/966-9665317_placeholder-image-person-jpg.png"
                    alt="">
            </div>
            <div id="trackTitle">
                <h3 id="trackH3">Title</h3>
                <p id="singerName">Singer Name</p>
            </div>
            <img src="https://img.icons8.com/material-outlined/24/000000/filled-like.png" />
        </div>
        <div id="middileDiv">
            <div id="playerButtons">
                <div id="backButton">
                    <?xml version="1.0" ?><svg style="enable-background:new 0 0 32 32;" version="1.1"
                        viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink">
                        <path
                            d="M23.4,8.1c-0.3-0.2-0.8-0.1-1.1,0.1L15,14V9c0-0.6-0.4-1-1-1H9C8.4,8,8,8.4,8,9v14c0,0.6,0.4,1,1,1h5c0.6,0,1-0.4,1-1v-5  l7.4,5.7c0.2,0.1,0.4,0.2,0.6,0.2c0.1,0,0.3,0,0.4-0.1c0.3-0.2,0.6-0.5,0.6-0.9V9C24,8.6,23.8,8.3,23.4,8.1z" />
                    </svg>
                </div>
                <div id="playPouseButtonDiv">
                    <button id="playPouseButton">
                        <img id="pouseImg"
                            src="https://icon-library.com/images/play-icon-png-transparent/play-icon-png-transparent-28.jpg"
                            alt="">
                    </button>
                </div>
                <div id="forwardButton">
                    <!-- <img src="https://img.icons8.com/ios-glyphs/30/000000/end--v1.png"/> -->
                    <?xml version="1.0" ?><svg id="Icons" style="enable-background:new 0 0 32 32;" version="1.1"
                        viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink">
                        <path
                            d="M23,8h-5c-0.6,0-1,0.4-1,1v5L9.6,8.2C9.3,8,8.9,7.9,8.6,8.1C8.2,8.3,8,8.6,8,9v14c0,0.4,0.2,0.7,0.6,0.9C8.7,24,8.9,24,9,24  c0.2,0,0.4-0.1,0.6-0.2L17,18v5c0,0.6,0.4,1,1,1h5c0.6,0,1-0.4,1-1V9C24,8.4,23.6,8,23,8z" />
                    </svg>
                </div>
            </div>
            <div id="playerLineDiv">
                <div id="currentTimeing">00:00</div>
                <div id="playerLine">
                    <input type="range" id="trackRange" min="0" value="0" max="100">
                </div>
                
                <div id="songTimeing"></div>
            </div>
        </div>
        <div id="rightDiv">
            <div>
                <img src="https://www.nicepng.com/png/detail/203-2039502_volume-icon.png" alt="">
            </div>
            <div id="valumeDiv">
                <input type="range" id="valumeRange" min="0" value="0" max="100">
                <div></div>
            </div>
        </div>
    </div>
</body>

</html>
<script>
    localStorage.setItem("authToken", JSON.stringify("BQAoDrKQ4vqY7xrZIH12bdhHxSDdnVpA5Z6R8buLbnNJzCjoLnOcXSWSbGcZIRMSq47KbXwoMERp7eDFeO7PZWb8t03LXtZ0Y49ukFrakkX-c4eTZThCycS4pC_jVTVpS-WXU0AMwkCthivyf-0FGaIUWKbAucwL3lV-Xf2Gft9ngkKsmy8z"));

    localStorage.setItem("trackId", JSON.stringify("7sRyejjZ7Ebkgo1sy6Gmfj"))

    let trackId = JSON.parse(localStorage.getItem("trackId"));
    let authToken = JSON.parse(localStorage.getItem("authToken"));

    let getMusic = async function (trackId) {
        console.log(trackId)
        try {

            //  categories = https://api.spotify.com/v1/browse/categories?country=IN&locale=sv_IN&limit=10&offset=5
            //  genre = https://api.spotify.com/v1/recommendations/available-genre-seeds


            let res = await fetch(`https://api.spotify.com/v1/tracks/${trackId}?market=IN`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${authToken}`,
                }

            })

            let data = await res.json();
            console.log(data);
            displayData(data)
            // playlistsIds(data.categories.items);
        } catch (error) {
            console.log(error);
        }
    }
    getMusic(trackId);

    let trackImg = document.getElementById("trackImg");
    let title = document.getElementById("trackH3");
    let singerName = document.getElementById("singerName");
    let trackRange = document.getElementById("trackRange");
    let songTime = document.getElementById("songTimeing");
    let currentTime = document.getElementById("currentTimeing");
    let audio = document.getElementById("audio")

    let audioSrc = "";
    function displayData(data) {
        audioSrc = data.preview_url;
        console.log(audioSrc)

        trackImg.src = data.album.images[2].url;
        title.textContent = data.name;
        singerName.textContent = data.album.artists[0].name;
        setTimeout(() => {
            trackRange.max = data.duration_ms / 1000;
            songTime.innerHTML = toMin(data.duration_ms)
            // console.log(data.duration_ms / 1000)
            // data.duration_ms
        }, 300)
    }

    function toMin(num){
        let ms = num;
            min = Math.floor((ms / 1000 / 60) << 0),
            sec = Math.floor((ms / 1000) % 60);

        return min + ':' + sec;
    }
    setInterval(() =>{
        trackRange.value = audio.currentTime;
        if(parseInt(audio.currentTime) < 10){
            currentTime.innerHTML = "00:0"+parseInt(audio.currentTime);
        }else{
            currentTime.innerHTML = "00:"+parseInt(audio.currentTime);
        }
        // console.log(audio.currentTime,currentTime,toMin(audio.currentTime))
    },500)



    document.getElementById("playPouseButton").addEventListener("click", imgChange);
    function imgChange() {
        // console.log(1)
        let img = document.getElementById("pouseImg");
        if (img.src == "https://www.pngall.com/wp-content/uploads/5/Pause-Button-PNG-HD-Image.png") {
            img.src = "https://icon-library.com/images/play-icon-png-transparent/play-icon-png-transparent-28.jpg";
        } else {
            img.src = "https://www.pngall.com/wp-content/uploads/5/Pause-Button-PNG-HD-Image.png";
        }
        ;
        audio.src = audioSrc;
        console.log(audioSrc)
        "https://p.scdn.co/mp3-preview/4e69d142cceaca1fa4bc8db7a319ab7a0b8ffd82?cid=774b29d4f13844c495f206cafdad9c86";
        if (img.src == "https://www.pngall.com/wp-content/uploads/5/Pause-Button-PNG-HD-Image.png") {
            audio.play();
        }

    }
    setTimeout(imgChange,2000) ;
</script>